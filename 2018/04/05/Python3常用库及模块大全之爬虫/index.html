<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-flash.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Python,爬虫," />





  <link rel="alternate" href="/atom.xml" title="煤油luck" type="application/atom+xml" />






<meta name="description" content="Python标准库  urllib——URL处理模块包urllib提供了一系列用于操作URL的功能。 urllib.request 请求模块 urllib.request.urlopen  urlopen常用的参数有三个(url, data, timeout)：  urllib.request.urlretrieveurllib.request.urlretrieve可以根据文件的URL下载文件">
<meta name="keywords" content="Python,爬虫">
<meta property="og:type" content="article">
<meta property="og:title" content="Python常用库及模块大全之爬虫">
<meta property="og:url" content="http://zzwplus.top/2018/04/05/Python3常用库及模块大全之爬虫/index.html">
<meta property="og:site_name" content="煤油luck">
<meta property="og:description" content="Python标准库  urllib——URL处理模块包urllib提供了一系列用于操作URL的功能。 urllib.request 请求模块 urllib.request.urlopen  urlopen常用的参数有三个(url, data, timeout)：  urllib.request.urlretrieveurllib.request.urlretrieve可以根据文件的URL下载文件">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-05-05T14:14:22.657Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python常用库及模块大全之爬虫">
<meta name="twitter:description" content="Python标准库  urllib——URL处理模块包urllib提供了一系列用于操作URL的功能。 urllib.request 请求模块 urllib.request.urlopen  urlopen常用的参数有三个(url, data, timeout)：  urllib.request.urlretrieveurllib.request.urlretrieve可以根据文件的URL下载文件">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://zzwplus.top/2018/04/05/Python3常用库及模块大全之爬虫/"/>





  <title>Python常用库及模块大全之爬虫 | 煤油luck</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">煤油luck</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">小舟从此逝 江海寄余生</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zzwplus.top/2018/04/05/Python3常用库及模块大全之爬虫/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzwplus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="煤油luck">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Python常用库及模块大全之爬虫</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-05T13:39:50+08:00">
                2018-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/05/Python3常用库及模块大全之爬虫/" class="leancloud_visitors" data-flag-title="Python常用库及模块大全之爬虫">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,219 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr>
<p><strong><em>Python标准库</em></strong></p>
<hr>
<h1 id="urllib——URL处理模块包"><a href="#urllib——URL处理模块包" class="headerlink" title="urllib——URL处理模块包"></a><a href="https://docs.python.org/3/library/urllib.html" target="_blank" rel="noopener">urllib</a>——URL处理模块包</h1><p><code>urllib</code>提供了一系列用于操作URL的功能。</p>
<h2 id="urllib-request-请求模块"><a href="#urllib-request-请求模块" class="headerlink" title="urllib.request 请求模块"></a><a href="https://docs.python.org/3/library/urllib.request.html" target="_blank" rel="noopener">urllib.request</a> 请求模块</h2><ul>
<li><h3 id="urllib-request-urlopen"><a href="#urllib-request-urlopen" class="headerlink" title="urllib.request.urlopen"></a><a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen" target="_blank" rel="noopener">urllib.request.urlopen</a></h3></li>
</ul>
<p><code>urlopen</code>常用的参数有三个(url, data, timeout)：</p>
<ul>
<li><h3 id="urllib-request-urlretrieve"><a href="#urllib-request-urlretrieve" class="headerlink" title="urllib.request.urlretrieve"></a><a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlretrieve" target="_blank" rel="noopener">urllib.request.urlretrieve</a></h3><code>urllib.request.urlretrieve</code>可以根据文件的URL下载文件。</li>
</ul>
<h2 id="urllib-error-异常处理模块"><a href="#urllib-error-异常处理模块" class="headerlink" title="urllib.error 异常处理模块"></a><a href="https://docs.python.org/3/library/urllib.error.html" target="_blank" rel="noopener">urllib.error</a> 异常处理模块</h2><h2 id="urllib-parse-url解析模块"><a href="#urllib-parse-url解析模块" class="headerlink" title="urllib.parse url解析模块"></a><a href="https://docs.python.org/3/library/urllib.parse.html" target="_blank" rel="noopener">urllib.parse</a> url解析模块</h2><ul>
<li><h3 id="urllib-parse-urlparse"><a href="#urllib-parse-urlparse" class="headerlink" title="urllib.parse.urlparse"></a><a href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlparse" target="_blank" rel="noopener">urllib.parse.urlparse</a></h3></li>
</ul>
<h2 id="urllib-robotparser-robots-txt解析模块"><a href="#urllib-robotparser-robots-txt解析模块" class="headerlink" title="urllib.robotparser robots.txt解析模块"></a><a href="https://docs.python.org/3/library/urllib.robotparser.html" target="_blank" rel="noopener">urllib.robotparser</a> robots.txt解析模块</h2><p><code>urllib.robotparser</code>模块提供了一个类<a href="https://docs.python.org/3/library/urllib.robotparser.html#urllib.robotparser.RobotFileParser" target="_blank" rel="noopener">RobotFileParser</a>，详情可见<a href="http://www.robotstxt.org/orig.html。" target="_blank" rel="noopener">http://www.robotstxt.org/orig.html。</a></p>
<blockquote>
<p><code>class urllib.robotparser.RobotFileParser(url=&#39;&#39;)</code></p>
<p>This class provides methods to read, parse and answer questions about the robots.txt file at url.</p>
<blockquote>
<p><code>set_url(url)</code>: Sets the URL referring to a robots.txt file.</p>
<p><code>read()</code>: Reads the robots.txt URL and feeds it to the parser.</p>
<p><code>parse(lines)</code>: Parses the lines argument.</p>
<p><code>can_fetch(useragent, url)</code>: Returns True if the useragent is allowed to fetch the url according to the rules contained in the parsed robots.txt file.</p>
<p><code>mtime()</code>: Returns the time the robots.txt file was last fetched. This is useful for long-running web spiders that need to check for new robots.txt files periodically.</p>
<p><code>modified()</code>: Sets the time the robots.txt file was last fetched to the current time.</p>
<p><code>crawl_delay(useragent)</code>: Returns the value of the Crawl-delay parameter from robots.txt for the useragent in question. If there is no such parameter or it doesn’t apply to the useragent specified or the robots.txt entry for this parameter has invalid syntax, return None.<strong>New in version 3.6</strong>.</p>
<p><code>request_rate(useragent)</code>: Returns the contents of the Request-rate parameter from robots.txt as a named tuple RequestRate(requests, seconds). If there is no such parameter or it doesn’t apply to the useragent specified or the robots.txt entry for this parameter has invalid syntax, return None.<strong>New in version 3.6</strong>.</p>
<p>The following example demonstrates basic use of the RobotFileParser class:</p>
<blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; import urllib.robotparser</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rp = urllib.robotparser.RobotFileParser()</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rp.set_url(<span class="string">"http://www.musi-cal.com/robots.txt"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rp.read()</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rrate = rp.request_rate(<span class="string">"*"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rrate.requests</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rrate.seconds</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rp.crawl_delay(<span class="string">"*"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rp.can_fetch(<span class="string">"*"</span>, <span class="string">"http://www.musi-cal.com/cgi-bin/search?city=San+Francisco"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; False</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; rp.can_fetch(<span class="string">"*"</span>, <span class="string">"http://www.musi-cal.com/"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; True</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li><h3 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h3><blockquote>
<p>robots.txt(Robots Exclusion Standard) 机器人排除标准</p>
<p>机器人排除标准很简单。和python等语言一样，注释都是用<code>#</code>号，用换行结尾，可以在文件的任意位置。</p>
<p>文件的第一行非注释内容是<code>User-agent：</code>，注明具体哪些规则机器人需要遵守。后面则是一组规则<code>Allow：</code>或<code>Disallow：</code>，决定是否允许机器人访问网站的该部分内容。星号<code>*</code>是通配符，可以用于<code>User-agent：</code>，也可用于URL链接。</p>
<p>如果一条规则后面跟着一个与之矛盾的规则，则按后一条规则执行。例如：</p>
<blockquote>
<p><code></code><br>welcome to my robots.txt file!<br>User-agent: <em><br>Disabllow: </em></p>
<p>User-agent: Googlebot<br>Allow: *<br>Disallow: /private</p>
</blockquote>
<p>在这个例子中，所有的机器人都被禁止访问网站的任何内容，除了谷歌的机器人，它被允许访问网站上除了<code>/private</code>位置的所有内容。</p>
</blockquote>
</li>
</ul>
<h1 id="re"><a href="#re" class="headerlink" title="re"></a><a href="https://docs.python.org/3/library/re.html" target="_blank" rel="noopener">re</a></h1><p><code>re</code></p>
<h1 id="random"><a href="#random" class="headerlink" title="random"></a><a href="https://docs.python.org/3/library/random.html" target="_blank" rel="noopener">random</a></h1><p><code>random</code></p>
<h1 id="time"><a href="#time" class="headerlink" title="time"></a><a href="https://docs.python.org/3/library/time.html" target="_blank" rel="noopener">time</a></h1><p><code>time</code></p>
<h1 id="datetime"><a href="#datetime" class="headerlink" title="datetime"></a><a href="https://docs.python.org/3/library/datetime.html" target="_blank" rel="noopener">datetime</a></h1><p><code>datetime</code>是Python处理日期和时间的标准库。</p>
<h1 id="json"><a href="#json" class="headerlink" title="json"></a><a href="https://docs.python.org/3/library/json.html" target="_blank" rel="noopener">json</a></h1><p><code>json</code></p>
<h1 id="os"><a href="#os" class="headerlink" title="os"></a><a href="https://docs.python.org/3/library/os.html" target="_blank" rel="noopener">os</a></h1><p><code>os</code></p>
<h1 id="subprocess"><a href="#subprocess" class="headerlink" title="subprocess"></a><a href="https://docs.python.org/3/library/subprocess.html" target="_blank" rel="noopener">subprocess</a></h1><p><code>subprocess</code></p>
<h1 id="unittest"><a href="#unittest" class="headerlink" title="unittest"></a><a href="https://docs.python.org/3/library/unittest.html" target="_blank" rel="noopener">unittest</a></h1><p><code>unittest</code></p>
<h1 id="io"><a href="#io" class="headerlink" title="io"></a><a href="https://docs.python.org/3/library/io.html" target="_blank" rel="noopener">io</a></h1><p><code>io</code></p>
<h1 id="zipfile"><a href="#zipfile" class="headerlink" title="zipfile"></a><a href="https://docs.python.org/3/library/zipfile.html" target="_blank" rel="noopener">zipfile</a></h1><p><code>zipfile</code></p>
<h1 id="string"><a href="#string" class="headerlink" title="string"></a><a href="https://docs.python.org/3/library/string.html" target="_blank" rel="noopener">string</a></h1><p><code>string</code></p>
<h1 id="operator"><a href="#operator" class="headerlink" title="operator"></a><a href="https://docs.python.org/3/library/operator.html" target="_blank" rel="noopener">operator</a></h1><p><code>operator</code></p>
<h1 id="csv"><a href="#csv" class="headerlink" title="csv"></a><a href="https://docs.python.org/3/library/csv.html" target="_blank" rel="noopener">csv</a></h1><p><code>csv</code>库可以非常简单地修改CSV文件，甚至从零开始创建一个CSV文件，如果文件已存在，Python会用新的数据覆盖原有的CSV文件。</p>
<hr>
<p><strong><em>Python第三方库</em></strong></p>
<hr>
<h1 id="PdfMiner"><a href="#PdfMiner" class="headerlink" title="PdfMiner"></a><a href="https://github.com/euske/pdfminer" target="_blank" rel="noopener">PdfMiner</a></h1><p><code>PdfMiner</code></p>
<h1 id="PyMySQL"><a href="#PyMySQL" class="headerlink" title="PyMySQL"></a><a href="https://github.com/PyMySQL/PyMySQL" target="_blank" rel="noopener">PyMySQL</a></h1><p><code>PyMySQL</code></p>
<h1 id="lxml"><a href="#lxml" class="headerlink" title="lxml"></a><a href="https://github.com/lxml/lxml" target="_blank" rel="noopener">lxml</a></h1><p><code>lxml</code></p>
<h1 id="PySocks"><a href="#PySocks" class="headerlink" title="PySocks"></a><a href="https://github.com/Anorov/PySocks" target="_blank" rel="noopener">PySocks</a></h1><p><code>PySocks</code></p>
<h1 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/" target="_blank" rel="noopener">BeautifulSoup</a></h1><p><code>BeautifulSoup</code></p>
<h1 id="Scrapy"><a href="#Scrapy" class="headerlink" title="Scrapy"></a><a href="https://github.com/scrapy/scrapy" target="_blank" rel="noopener">Scrapy</a></h1><p><code>Scrapy</code></p>
<h1 id="NLTK"><a href="#NLTK" class="headerlink" title="NLTK"></a><a href="https://github.com/nltk/nltk" target="_blank" rel="noopener">NLTK</a></h1><blockquote>
<p><code>NLTK</code>(Natural Language Toolkit, 自然语言工具包), 用于识别标记英语文本中各个词的词性(parts of speech)。推荐一本免费的在线电子书，<a href="http://www.nltk.org" target="_blank" rel="noopener">《用Python进行自然语言处理》</a>， 用NLP 工具包（开源免费，Python）来进行文本分析。特别适合初学计算语言学的学生。</p>
</blockquote>
<h1 id="Requests"><a href="#Requests" class="headerlink" title="Requests"></a><a href="https://github.com/requests/requests" target="_blank" rel="noopener">Requests</a></h1><blockquote>
<p><code>Requests</code>是一个擅长处理那些复杂的HTTP请求、cookie、header(响应头和请求头)等内容的Python第三方库。</p>
<p>下面是<code>Requests</code>的创建者<a href="https://github.com/kennethreitz" target="_blank" rel="noopener"><strong>Kenneth Reitz</strong></a>对Python标准库工具的评价。</p>
<blockquote>
<p>Python的标准库urllib2为你提供了大多数HTTP功能，但是它的API非常差劲。这是因为它是经过许多年一步步建立起来的——不同时期要面对的是不同的网络环境。于是为了完成最简单的任务，它需要耗费大量的工作(甚至要重写整个方法)。</p>
<p>事情不应该这样复杂，更不应该发生在Python里。</p>
</blockquote>
</blockquote>
<h1 id="Selenium"><a href="#Selenium" class="headerlink" title="Selenium"></a><a href="https://github.com/SeleniumHQ/selenium" target="_blank" rel="noopener">Selenium</a></h1><blockquote>
<p><code>Selenium</code>是一个强大的网络数据采集工具，它可以让浏览器自动加载页面，获取需要的数据，甚至页面截屏。</p>
<p>selenium自己不带浏览器，它需要与第三方浏览器结合在一起使用。</p>
</blockquote>
<h1 id="Pillow"><a href="#Pillow" class="headerlink" title="Pillow"></a><a href="https://github.com/python-pillow/Pillow" target="_blank" rel="noopener">Pillow</a></h1><blockquote>
<p><code>Pillow</code>可以轻松地导入代码并通过大量的过滤、修饰甚至像素级的变换操作处理图片。</p>
</blockquote>
<h1 id="Tesseract"><a href="#Tesseract" class="headerlink" title="Tesseract"></a><a href="https://github.com/tesseract-ocr/tesseract" target="_blank" rel="noopener">Tesseract</a></h1><blockquote>
<p><code>Tesseract</code>是一个OCR(Optical Character Recognition,光学文字识别)库，目前由Google赞助，是目前公认最优秀、最精确的开源OCR系统。</p>
<p>除了极高的精确度，<code>Tesseract</code>也具有很高的灵活性。它可以通过训练识别出任何字体(只要这些字体风格保持不变就可以)，也可以识别出任何<code>Unicode</code>字符。</p>
<p><code>Tesseract</code>是一个Python命令行工具，不是通过<code>import</code>语句导入的库。安装之后，要用<code>Tesseract</code>命令在Python的外面运行。</p>
</blockquote>

      
    </div>
    
    
    

    # 
    <div style="text-align:center;color: #ccc;font-size:14px;">---------------- The End ----------------</div>

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    zzwplus
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://zzwplus.top/2018/04/05/Python3常用库及模块大全之爬虫/" title="Python常用库及模块大全之爬虫">http://zzwplus.top/2018/04/05/Python3常用库及模块大全之爬虫/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
          
            <a href="/tags/爬虫/" rel="tag"><i class="fa fa-tag"></i> 爬虫</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/04/01/CUGB查询脚本/" rel="next" title="CUGB查询脚本">
                <i class="fa fa-chevron-left"></i> CUGB查询脚本
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/06/Python网络数据采集/" rel="prev" title="《Python网络数据采集》">
                《Python网络数据采集》 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zNDM0MC8xMDg3Nw=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="zzwplus" />
            
              <p class="site-author-name" itemprop="name">zzwplus</p>
              <p class="site-description motion-element" itemprop="description">地大16级本||阿卡林人士</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zzwplus" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zzwandnexus@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/6092019150" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>Weibo</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#urllib——URL处理模块包"><span class="nav-number">1.</span> <span class="nav-text">urllib——URL处理模块包</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#urllib-request-请求模块"><span class="nav-number">1.1.</span> <span class="nav-text">urllib.request 请求模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#urllib-request-urlopen"><span class="nav-number">1.1.1.</span> <span class="nav-text">urllib.request.urlopen</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#urllib-request-urlretrieve"><span class="nav-number">1.1.2.</span> <span class="nav-text">urllib.request.urlretrieve</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#urllib-error-异常处理模块"><span class="nav-number">1.2.</span> <span class="nav-text">urllib.error 异常处理模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#urllib-parse-url解析模块"><span class="nav-number">1.3.</span> <span class="nav-text">urllib.parse url解析模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#urllib-parse-urlparse"><span class="nav-number">1.3.1.</span> <span class="nav-text">urllib.parse.urlparse</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#urllib-robotparser-robots-txt解析模块"><span class="nav-number">1.4.</span> <span class="nav-text">urllib.robotparser robots.txt解析模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#补充说明"><span class="nav-number">1.4.1.</span> <span class="nav-text">补充说明</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#re"><span class="nav-number">2.</span> <span class="nav-text">re</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#random"><span class="nav-number">3.</span> <span class="nav-text">random</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#time"><span class="nav-number">4.</span> <span class="nav-text">time</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#datetime"><span class="nav-number">5.</span> <span class="nav-text">datetime</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#json"><span class="nav-number">6.</span> <span class="nav-text">json</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#os"><span class="nav-number">7.</span> <span class="nav-text">os</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#subprocess"><span class="nav-number">8.</span> <span class="nav-text">subprocess</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#unittest"><span class="nav-number">9.</span> <span class="nav-text">unittest</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#io"><span class="nav-number">10.</span> <span class="nav-text">io</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zipfile"><span class="nav-number">11.</span> <span class="nav-text">zipfile</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#string"><span class="nav-number">12.</span> <span class="nav-text">string</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#operator"><span class="nav-number">13.</span> <span class="nav-text">operator</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#csv"><span class="nav-number">14.</span> <span class="nav-text">csv</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PdfMiner"><span class="nav-number">15.</span> <span class="nav-text">PdfMiner</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PyMySQL"><span class="nav-number">16.</span> <span class="nav-text">PyMySQL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#lxml"><span class="nav-number">17.</span> <span class="nav-text">lxml</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PySocks"><span class="nav-number">18.</span> <span class="nav-text">PySocks</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BeautifulSoup"><span class="nav-number">19.</span> <span class="nav-text">BeautifulSoup</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Scrapy"><span class="nav-number">20.</span> <span class="nav-text">Scrapy</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NLTK"><span class="nav-number">21.</span> <span class="nav-text">NLTK</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Requests"><span class="nav-number">22.</span> <span class="nav-text">Requests</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Selenium"><span class="nav-number">23.</span> <span class="nav-text">Selenium</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pillow"><span class="nav-number">24.</span> <span class="nav-text">Pillow</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tesseract"><span class="nav-number">25.</span> <span class="nav-text">Tesseract</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zzwplus</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">18.0k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("zi2S25kvHv4vf8QWnsI52x2y-gzGzoHsz", "cSk1wB2f1csznekhSgqiQuXT");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.4"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.4"></script>


  

</body>
</html>
